<!DOCTYPE html>
<html>
  <head>
    <%- include('./partials/head') %>
  </head>
  <body>
    <nav class="simply-nav">
      <div class="back-and-ll">
        <a class="nav-icon" href="/landlords/dashboard/<%= propietario.id %>"><i class="fa-solid fa-arrow-left"></i></a>
        <div class="pll-info">
          <h1 class="pll-name"> <%= propietario.name + ' ' + propietario.lastName %> </h1>
          <p class="pll-section">/ Nuevo contrato</p>
        </div>
      </div>
      <div>
        <a class="nav-icon" href="/contracts/create"><i class="fa-solid fa-plus"></i></a>
        <a class="nav-icon lupa" href=""><i class="fa-solid fa-magnifying-glass"></i></a>
      </div>
    </nav>
    <main class="form-group">
      <form class="window" action="/contracts/create" method="POST"">
            <h1 class="">Nueva contrato</h1>
            <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                <symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16">
                    <path
                        d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z" />
                </symbol>
            </svg>
            <% if (locals && locals.errors) { %>
                <div class="alert alert-danger" role="alert">
                    <% for ( let error in errors ) { %>
                        <div>
                            <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:">
                                <use xlink:href="#exclamation-triangle-fill" />
                            </svg>
                            <%= errors[error].msg %>
                        </div>
                    <% } %>
                </div>
            <% } %>
            <label for="tenantId">Seleccione un inquilino:
                <select name="tenantId" id="tenantId">
                    <% inquilinos.forEach(inquilino => { %> 
                        <option value="<%= inquilino.id %>"><%= inquilino.lastName + ' ' + inquilino.name %></option>
                    <% }) %>
                </select>
            </label>
            <label for="propertyId">Seleccione una propiedad:
                <select class="w-element" name="propertyId" id="propertyId">
                    <% propiedades.forEach(propiedad => { %> 
                        <option value="<%= propiedad.id %>"><%= propiedad.streetName + ' Nº' + propiedad.streetNumber + ' ' + propiedad.apartment %></option>
                    <% }) %>
                </select>
            </label>
            <label for="startDate">Inicio del contrato:
                <input class="w-element" type="date" name="startDate" id="startDate" value='<%= locals.oldData && oldData.startDate ? oldData.startDate : null %>'>
            </label>
            <label for="endDate">Fin del contrato:
                <input class="w-element" type="date" name="endDate" id="endDate" value='<%= locals.oldData && oldData.endDate ? oldData.endDate : null %>'>
            </label>
            <label for="duration">Duración:
                <input class="w-element" type="number" name="duration" id="duration" value='<%= locals.oldData && oldData.duration ? oldData.duration : null %>'>
            </label>
            <label for="initialPrice">Precio inicial:
                <input class="w-element" type="number" name="initialPrice" id="initialPrice" value='<%= locals.oldData && oldData.initialPrice ? oldData.initialPrice : null %>'>
            </label>
            <label for="dailyLateFee">Interés por mora:
                <input class="w-element" type="number" name="dailyLateFee" id="dailyLateFee" value='<%= locals.oldData && oldData.dailyLateFee ? oldData.dailyLateFee : null %>'>
            </label>
            <label for="gracePeriod">Días de gracias:
                <input class="w-element" type="number" name="gracePeriod" id="gracePeriod" value='<%= locals.oldData && oldData.gracePeriod ? oldData.gracePeriod : null %>'>
            </label>
            <button class="continue-btn" type="submit">Crear</button>
        </form>
    </main>
    <footer>

    </footer>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js" integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz" crossorigin="anonymous"></script>
  </body>
</html>

<!--
  --- Atribuciones---

  Home button icons created by Kiranshastry - Flaticon
-->